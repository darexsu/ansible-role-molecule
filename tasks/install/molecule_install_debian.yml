- name: ensure dependencies are installed.
  ansible.builtin.apt:
    name:
      - python3-pip
      - libssl-dev
      - python3-venv
    state: present

- name: Ensure molecule is installed in a virtual environment
  pip:
    name: molecule
    version: ""
    state: present
    virtualenv: "/home/darexsu/.virtualenvs/molecule"
    virtualenv_command: "/usr/bin/python3.9 -m venv"
    virtualenv_site_packages: "false"

- name: Ensure molecule support packages are installed in a virtual environment
  pip:
    name: "molecule[{{ item }}]"
    version: ""
    state: present
    virtualenv: "/home/darexsu/.virtualenvs/molecule"
    virtualenv_command: "/usr/bin/python3.9 -m venv"
    virtualenv_site_packages: "false"
  with_items: "{{ molecule_install_list }}"
